<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://foxssake.github.io/netfox/0eaeaf4/netfox/tutorials/configuring-properties-from-code/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Configuring properties from code - netfox</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../css/version-selector.css" rel="stylesheet" />
        <link href="../../../css/twemoji.css" rel="stylesheet" />
        <link href="../../../assets/mkdocs_puml/puml.css" rel="stylesheet" />
        <link href="../../../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Configuring properties from code";
        var mkdocs_page_input_path = "netfox/tutorials/configuring-properties-from-code.md";
        var mkdocs_page_url = "/netfox/0eaeaf4/netfox/tutorials/configuring-properties-from-code/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script>
  <script src="https://giscus.app/client.js"
          data-repo="foxssake/netfox"
          data-repo-id="R_kgDOKBON2A"
          data-category="Docs"
          data-category-id="DIC_kwDOKBON2M4Clib_"
          data-mapping="title"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="top"
          data-theme="light"
          data-lang="en"
          data-loading="lazy"
          crossorigin="anonymous"
          async>
  </script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> netfox
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../upgrading/">Upgrading netfox</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../made-with-netfox/">Made with netfox</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../press-kit/">Press kit</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../contributors/">Contributors</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">netfox</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" >Tutorials</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../responsive-player-movement/">Responsive player movement</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../input-gathering-tips-and-tricks/">Input gathering tips and tricks</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../predicting-input/">Predicting input</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../modifying-objects-during-rollback/">Modifying objects during rollback</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Configuring properties from code</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#adding-properties-from-code">Adding properties from code</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#adding-properties-automatically-in-the-editor">Adding properties automatically, in the editor</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#caveats">Caveats</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../rollback-caveats/">Rollback caveats</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../interpolation-caveats/">Interpolation caveats</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Concepts</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../concepts/servers-clients-ownership/">Servers, clients, and ownership</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../concepts/authoritative-servers/">Authoritative servers</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Guides</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../guides/logging/">Logging</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../guides/network-time/">NetworkTime</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../guides/network-time-synchronizer/">NetworkTimeSynchronizer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../guides/network-events/">NetworkEvents</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../guides/interpolators/">Interpolators</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../guides/property-paths/">Property paths</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../guides/network-rollback/">NetworkRollback</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../guides/network-performance/">NetworkPerformance</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../guides/netfox-sharp/">Netfox Sharp</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Nodes</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../nodes/tick-interpolator/">TickInterpolator</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../nodes/rollback-synchronizer/">RollbackSynchronizer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../nodes/state-synchronizer/">StateSynchronizer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../nodes/rewindable-action/">RewindableAction</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">netfox.noray</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Guides</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../netfox.noray/guides/noray/">Noray</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../netfox.noray/guides/packet-handshake/">PacketHandshake</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">netfox.extras</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Guides</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../netfox.extras/guides/physics/">Physics</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../netfox.extras/guides/base-net-input/">BaseNetInput</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../netfox.extras/guides/network-weapon/">NetworkWeapon</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../netfox.extras/guides/rewindable-state-machine/">RewindableStateMachine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../netfox.extras/guides/window-tiler/">WindowTiler</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">netfox</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">netfox</li>
          <li class="breadcrumb-item">Tutorials</li>
      <li class="breadcrumb-item active">Configuring properties from code</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="configuring-properties-from-code">Configuring properties from code</h1>
<p>In netfox, there are multiple nodes that accept <a href="../../guides/property-paths/">property paths</a> as their
configuration, for various purposes. These can be configured as lists of
strings in the editor.</p>
<p>In bigger projects, with many scenes and deeper class trees, manually
configuring property paths may be tedious and unscaleable. Potentially, there
may be cases where these properties are only known at runtime, not when working
in the Editor.</p>
<p>There are solutions for both cases.</p>
<h2 id="adding-properties-from-code">Adding properties from code</h2>
<p>Properties can be added at run-time with the following methods:</p>
<ul>
<li><code>TickInterpolator::add_property(node, property)</code></li>
<li><code>StateSynchronizer::add_state(node, property)</code></li>
<li><code>RollbackSynchronizer::add_state(node, property)</code></li>
<li><code>RollbackSynchronizer::add_input(node, property)</code></li>
</ul>
<p><em>node</em> is a reference to a node - it may be a <em>string</em> or a <em><a href="https://docs.godotengine.org/en/stable/classes/class_nodepath.html">NodePath</a></em>
pointing to an existing node, or a <em><a href="https://docs.godotengine.org/en/stable/classes/class_node.html">Node</a></em> instance. When using paths, the
path itself is considered relative to the configured <em>root</em> node.</p>
<p>After calling any of the methods above, calling <code>process_settings()</code> is not
necessary - it will be called automatically.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The same as with <code>process_settings()</code>, configuration changes are not
synchronized automatically! You, the developer, must ensure that
configuration changes happen on all peers, at the same time.</p>
</div>
<h2 id="adding-properties-automatically-in-the-editor">Adding properties automatically, in the editor</h2>
<p>You can ensure that certain properties are added to netfox's nodes'
configuration by making your class a <code>@tool</code> script, and implementing the
following methods:</p>
<ul>
<li>TickInterpolator: <code>_get_interpolated_properties()</code></li>
<li>StateSynchronizer: <code>_get_synchronized_state_properties()</code></li>
<li>RollbackSynchronizer:</li>
<li><code>_get_rollback_state_properties()</code> for state</li>
<li><code>_get_rollback_input_properties()</code> for input</li>
</ul>
<p>These must return an array, with each element being a string, or a two-element
array.</p>
<p>Strings are interpreted as property names.</p>
<p>Arrays are interpreted as node-property pairs. Similarly to the <code>add_*</code>
methods, the <em>node</em> may be a string, a <a href="https://docs.godotengine.org/en/stable/classes/class_nodepath.html">NodePath</a>, or an actual <a href="https://docs.godotengine.org/en/stable/classes/class_node.html">Node</a>
instance. When using strings or <a href="https://docs.godotengine.org/en/stable/classes/class_nodepath.html">NodePath</a>s, keep in mind that the path is
considered <em>relative to the node itself, not the configured root</em>.</p>
<p>Each of these nodes will explore nodes under their <code>root</code> node, and call the
above methods if implemented. The results will be added to the node
configuration.</p>
<p>This exploration is implemented in the nodes' <code>_get_configuration_warnings()</code>
method, which is called when the node tree changes ( i.e. nodes are added /
removed ), and when opening the scene.</p>
<p>The exploration also runs when before saving the scene, to make sure that any
updates are picked up.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To make sure that the updated methods are picked up, save your scene. The
exploration is ran before every scene save.</p>
</div>
<p>An example implementation for the above methods:</p>
<div class="highlight"><pre><span></span><code><span class="k">func</span><span class="w"> </span><span class="n">_get_interpolated_properties</span><span class="p">():</span>
<span class="w">    </span><span class="c1"># Specify a list of properties</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;quaternion&quot;</span><span class="p">]</span>

<span class="k">func</span><span class="w"> </span><span class="n">_get_synchronized_state_properties</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Specify inherited properties and more</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">super</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;health&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">[</span><span class="n">weapon</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ammo&quot;</span><span class="p">],</span><span class="w">       </span><span class="c1"># Specify a property on another node</span>
<span class="w">        </span><span class="p">[</span><span class="s2">&quot;Hand/Weapon&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ammo&quot;</span><span class="p">]</span><span class="w"> </span><span class="c1"># Specify node by path</span>
<span class="w">    </span><span class="p">]</span>

<span class="k">func</span><span class="w"> </span><span class="n">_get_rollback_state_properties</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">:</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;transform&quot;</span><span class="p">,</span><span class="w">            </span><span class="c1"># Specify a property on self</span>
<span class="w">        </span><span class="p">[</span><span class="n">weapon</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ammo&quot;</span><span class="p">]</span><span class="w">        </span><span class="c1"># Specify a property on another node</span>
<span class="w">    </span><span class="p">]</span>

<span class="k">func</span><span class="w"> </span><span class="n">_get_rollback_input_propertes</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Specify a list of properties</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;movement&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;is_jumping&quot;</span><span class="p">]</span>
</code></pre></div>
<p>See the <a href="https://github.com/foxssake/netfox/tree/main/examples/property-configuration">Property configuration example</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In general, it's best practice to only specify node's own properties. An
exception is when the given node has no script attached.</p>
</div>
<h3 id="caveats">Caveats</h3>
<p><strong>Node renames and removals</strong> are not tracked. Unless fixed manually, they will
result in invalid property warnings.</p>
<p>A workaround is to reset the node's state/input/property configuration to an
empty array and save again. This will gather the tracked properties with the
right node names.</p>
              
            </div>
          </div>
  <hr>
  <h2>User discussion</h2>
  <div class="giscus" ></div>
  <hr>
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../modifying-objects-during-rollback/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../rollback-caveats/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../assets/mkdocs_puml/puml.js"></script>
      <script src="../../../js/version-select.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
